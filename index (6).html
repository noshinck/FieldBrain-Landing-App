<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FieldBrain - Climate Decision Engine</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@1,400;1,500&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- GSAP for Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Newsreader', 'serif'],
                    },
                    colors: {
                        brand: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            900: '#14532d',
                        },
                        slate: {
                            850: '#1e293b', 
                        }
                    },
                    boxShadow: {
                        'glow': '0 0 80px -20px rgba(34, 197, 94, 0.4)',
                        'soft': '0 20px 40px -15px rgba(0, 0, 0, 0.05)',
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px -1px rgba(0, 0, 0, 0.02)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f8fafc;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }
        
        /* App Loader */
        .loader-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e2e8f0;
            border-top: 3px solid #16a34a;
            border-radius: 50%;
            animation: spin 1s cubic-bezier(0.55, 0.055, 0.675, 0.19) infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Abstract Background Pattern */
        .bg-pattern {
            background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
            background-size: 32px 32px;
            opacity: 0.4;
        }

        .no-scrollbar::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }
    </style>
</head>
<body class="relative min-h-screen text-slate-800">

    <!-- LANDING PAGE VIEW -->
    <div id="landing-page" class="relative z-10 w-full flex flex-col">
        
        <!-- Background Decor -->
        <div class="fixed inset-0 bg-pattern pointer-events-none z-[-1]"></div>
        <div class="fixed top-0 right-0 w-[600px] h-[600px] bg-brand-100/40 rounded-full blur-[120px] z-[-1] translate-x-1/3 -translate-y-1/3"></div>
        <div class="fixed bottom-0 left-0 w-[500px] h-[500px] bg-blue-50/50 rounded-full blur-[100px] z-[-1] -translate-x-1/4 translate-y-1/4"></div>

        <!-- Navigation -->
        <nav class="w-full px-6 py-6 sticky top-0 z-40 backdrop-blur-md bg-white/70 border-b border-white/50">
            <div class="max-w-6xl mx-auto flex justify-between items-center">
                <div class="flex items-center gap-2 cursor-pointer" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
                    <div class="w-8 h-8 bg-brand-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-md hover:scale-105 transition-transform">F</div>
                    <span class="font-bold text-lg tracking-tight text-slate-900">FieldBrain</span>
                </div>
                <div class="hidden md:flex items-center gap-8 text-sm font-medium text-slate-500">
                    <a href="#how-it-works" class="hover:text-brand-700 transition-colors">How it works</a>
                    <a href="#features" class="hover:text-brand-700 transition-colors">Features</a>
                    <a href="#stories" class="hover:text-brand-700 transition-colors">Stories</a>
                </div>
                <button class="launch-trigger px-5 py-2.5 bg-slate-900 text-white text-sm font-semibold rounded-full hover:bg-black transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                    Launch App
                </button>
            </div>
        </nav>

        <!-- Hero Section -->
        <header class="flex flex-col items-center justify-center px-6 text-center pt-20 pb-32 max-w-5xl mx-auto relative">
            
            <div class="hero-anim opacity-0 translate-y-4 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-brand-50 border border-brand-100 text-brand-700 text-xs font-semibold uppercase tracking-wide mb-8">
                <span class="w-2 h-2 rounded-full bg-brand-500 animate-pulse"></span>
                v1.1 Live Data Integrated
            </div>

            <h1 class="hero-anim opacity-0 translate-y-4 text-5xl md:text-8xl font-bold tracking-tight text-slate-900 mb-8 leading-[1.05]">
                Stop guessing.<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-600 to-emerald-800">Start knowing.</span>
            </h1>

            <p class="hero-anim opacity-0 translate-y-4 text-lg md:text-2xl text-slate-500 mb-12 max-w-2xl leading-relaxed mx-auto">
                Weather apps give you raw data. FieldBrain translates complex climate forecasts into simple, actionable decisions for your farm.
            </p>

            <div class="hero-anim opacity-0 translate-y-4 flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto">
                <button class="launch-trigger w-full sm:w-auto px-8 py-4 bg-brand-600 text-white text-lg font-bold rounded-2xl hover:bg-brand-700 transition-all shadow-glow flex items-center justify-center gap-2 group">
                    Try the Demo
                    <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
                </button>
                <button class="w-full sm:w-auto px-8 py-4 bg-white text-slate-700 border border-slate-200 text-lg font-semibold rounded-2xl hover:bg-slate-50 transition-all hover:border-slate-300">
                    Watch Video
                </button>
            </div>
        </header>

        <!-- Stats Section -->
        <section class="w-full border-y border-slate-200 bg-white/50 backdrop-blur-sm py-12 scroll-section">
            <div class="max-w-6xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                <div class="stat-item opacity-0 translate-y-4">
                    <p class="text-4xl font-bold text-slate-900 mb-1">50k+</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Active Farmers</p>
                </div>
                <div class="stat-item opacity-0 translate-y-4">
                    <p class="text-4xl font-bold text-slate-900 mb-1">2M+</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Acres Monitored</p>
                </div>
                <div class="stat-item opacity-0 translate-y-4">
                    <p class="text-4xl font-bold text-slate-900 mb-1">95%</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Alert Accuracy</p>
                </div>
                <div class="stat-item opacity-0 translate-y-4">
                    <p class="text-4xl font-bold text-slate-900 mb-1">12+</p>
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">States Covered</p>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="py-24 max-w-6xl mx-auto px-6 scroll-section">
            <div class="text-center mb-16 section-header opacity-0 translate-y-4">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">Intelligence in three steps.</h2>
                <p class="text-slate-500 text-lg max-w-2xl mx-auto">No complex charts. No scientific jargon. Just the answers you need.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 relative">
                <!-- Connecting Line (Desktop) -->
                <div class="hidden md:block absolute top-12 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-slate-200 to-transparent z-0"></div>

                <!-- Step 1 -->
                <div class="step-card opacity-0 translate-y-8 bg-white p-8 rounded-3xl border border-slate-100 shadow-card relative z-10 hover:shadow-lg transition-shadow">
                    <div class="w-16 h-16 bg-white border-4 border-slate-50 rounded-2xl flex items-center justify-center text-brand-600 mb-6 mx-auto shadow-sm">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 mb-3 text-center">1. Set Location</h3>
                    <p class="text-slate-500 text-center leading-relaxed">Enter your village or pin code. We use hyper-local satellite data to pinpoint your exact weather grid.</p>
                </div>

                <!-- Step 2 -->
                <div class="step-card opacity-0 translate-y-8 bg-white p-8 rounded-3xl border border-slate-100 shadow-card relative z-10 hover:shadow-lg transition-shadow">
                    <div class="w-16 h-16 bg-white border-4 border-slate-50 rounded-2xl flex items-center justify-center text-blue-500 mb-6 mx-auto shadow-sm">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 mb-3 text-center">2. Select Crop</h3>
                    <p class="text-slate-500 text-center leading-relaxed">Tell us what you are growing (Paddy, Maize, Wheat) and its current growth stage.</p>
                </div>

                <!-- Step 3 -->
                <div class="step-card opacity-0 translate-y-8 bg-white p-8 rounded-3xl border border-slate-100 shadow-card relative z-10 hover:shadow-lg transition-shadow">
                    <div class="w-16 h-16 bg-white border-4 border-slate-50 rounded-2xl flex items-center justify-center text-emerald-500 mb-6 mx-auto shadow-sm">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold text-slate-900 mb-3 text-center">3. Get Decisions</h3>
                    <p class="text-slate-500 text-center leading-relaxed">Receive instant, plain-language advice: "Harvest now" or "Delay sowing by 3 days."</p>
                </div>
            </div>
        </section>

        <!-- Features Grid -->
        <section id="features" class="py-24 bg-slate-50 scroll-section">
            <div class="max-w-6xl mx-auto px-6">
                <div class="mb-16 section-header opacity-0 translate-y-4">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">Built for the field.</h2>
                    <p class="text-slate-500 text-lg max-w-2xl">Technology that works where you work.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="feature-card opacity-0 translate-y-8 p-8 bg-white rounded-3xl border border-slate-200/60 hover:border-brand-200 transition-colors">
                        <div class="w-12 h-12 bg-amber-50 rounded-xl flex items-center justify-center text-amber-600 mb-6">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-2">Offline First Architecture</h3>
                        <p class="text-slate-500">Internet is spotty in the fields. FieldBrain caches prediction models locally, allowing you to check advice even when the signal drops.</p>
                    </div>

                    <div class="feature-card opacity-0 translate-y-8 p-8 bg-white rounded-3xl border border-slate-200/60 hover:border-brand-200 transition-colors">
                        <div class="w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center text-blue-600 mb-6">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        </div>
                        <h3 class="text-xl font-bold text-slate-900 mb-2">Crop-Specific Logic</h3>
                        <p class="text-slate-500">Rain that is good for Paddy might destroy Wheat. Our engine understands the biological needs of your specific crop at every growth stage.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonial Section -->
        <section id="stories" class="py-24 max-w-5xl mx-auto px-6 scroll-section">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-16 text-center section-header opacity-0 translate-y-4">Trusted by the community.</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="story-card opacity-0 translate-y-8 p-8 bg-slate-900 rounded-3xl text-white relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-8 text-slate-700 opacity-20">
                        <svg class="w-24 h-24 transform translate-x-4 -translate-y-4" fill="currentColor" viewBox="0 0 24 24"><path d="M14.017 21L14.017 18C14.017 16.0547 15.1953 15.125 16.8906 15.125C18.6641 15.125 19.8359 16.0547 19.8359 18L19.8359 21L19.8359 21.9961L22.9922 21.9961L22.9922 21L22.9922 18C22.9922 14.3906 20.5781 12.0117 17.2656 12.0117C16.3516 12.0117 15.5547 12.1992 14.8672 12.5742C14.75 10.3711 15.7578 8.78906 17.6172 8.78906C18.7891 8.78906 19.5312 9.53906 19.6484 10.7109L22.6875 10.7109C22.5469 7.76172 20.6953 5.76953 17.6172 5.76953C14.017 5.76953 11.6484 8.53125 11.6484 12.5508L11.6484 21L14.017 21ZM5.52344 21L5.52344 18C5.52344 16.0547 6.70312 15.125 8.39844 15.125C10.168 15.125 11.3438 16.0547 11.3438 18L11.3438 21L11.3438 21.9961L14.5 21.9961L14.5 21L14.5 18C14.5 14.3906 12.0859 12.0117 8.77344 12.0117C7.85938 12.0117 7.0625 12.1992 6.375 12.5742C6.25781 10.3711 7.26562 8.78906 9.125 8.78906C10.2969 8.78906 11.0391 9.53906 11.1562 10.7109L14.1953 10.7109C14.0547 7.76172 12.2031 5.76953 9.125 5.76953C5.52344 5.76953 3.15625 8.53125 3.15625 12.5508L3.15625 21L5.52344 21Z"/></svg>
                    </div>
                    <p class="text-xl font-serif italic leading-relaxed mb-6 relative z-10 text-slate-200">"Last season, the app warned me of a heatwave 3 days early. I irrigated immediately and saved nearly 40% of my maize crop. It's like having an expert in my pocket."</p>
                    <div>
                        <p class="font-bold text-white">Rajesh Kumar</p>
                        <p class="text-sm text-slate-400">Paddy Farmer, Punjab</p>
                    </div>
                </div>

                <div class="story-card opacity-0 translate-y-8 p-8 bg-white rounded-3xl border border-slate-200 shadow-sm relative">
                    <p class="text-xl font-serif italic leading-relaxed mb-6 text-slate-700">"My father doesn't understand complex graphs. FieldBrain just tells him 'Do this' or 'Don't do that'. The simplicity is the real innovation here."</p>
                    <div>
                        <p class="font-bold text-slate-900">Priya Singh</p>
                        <p class="text-sm text-slate-500">Daughter & Software Engineer</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Final CTA -->
        <section class="py-24 px-6 scroll-section">
            <div class="max-w-4xl mx-auto bg-brand-900 rounded-[2.5rem] p-12 md:p-20 text-center relative overflow-hidden shadow-2xl section-cta opacity-0 scale-95">
                <!-- Decorative circles -->
                <div class="absolute top-0 left-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2"></div>
                <div class="absolute bottom-0 right-0 w-64 h-64 bg-brand-500/20 rounded-full blur-3xl translate-x-1/2 translate-y-1/2"></div>

                <h2 class="text-3xl md:text-5xl font-bold text-white mb-6 relative z-10">Ready to secure your harvest?</h2>
                <p class="text-brand-100 text-lg mb-10 max-w-2xl mx-auto relative z-10">Join thousands of farmers making smarter decisions today.</p>
                
                <button class="launch-trigger inline-flex items-center gap-2 bg-white text-brand-900 px-8 py-4 rounded-full font-bold text-lg hover:bg-brand-50 transition-colors shadow-lg relative z-10">
                    Get Started for Free
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                </button>
            </div>
        </section>

        <footer class="py-12 text-center text-sm text-slate-400 border-t border-slate-200 bg-white">
            <div class="flex flex-col items-center gap-4">
                <div class="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center text-slate-400 font-bold text-xs">F</div>
                <p>&copy; 2024 FieldBrain Intelligence. Decisions, not data.</p>
                <div class="flex gap-6 mt-2">
                    <a href="#" class="hover:text-slate-600">Privacy</a>
                    <a href="#" class="hover:text-slate-600">Terms</a>
                    <a href="#" class="hover:text-slate-600">Contact</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- APP OVERLAY VIEW (Initially Hidden) -->
    <div id="app-container" class="fixed inset-0 z-50 bg-slate-900/40 backdrop-blur-md hidden flex items-center justify-center p-4">
        
        <!-- Click outside to close area -->
        <div id="app-backdrop" class="absolute inset-0"></div>

        <!-- The App Card -->
        <main id="app-card" class="w-full max-w-[400px] bg-white rounded-[2rem] shadow-2xl overflow-hidden relative min-h-[680px] border border-slate-100/50 scale-95 opacity-0">
            
            <!-- Close App Button -->
            <button id="close-app-btn" class="absolute right-5 top-5 z-30 p-2 bg-slate-50 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>

            <!-- App Header -->
            <header class="px-8 pt-8 pb-4 bg-white relative z-20">
                <div class="flex items-center justify-between mb-1 app-anim opacity-0">
                    <div class="flex items-center gap-2.5">
                        <div class="w-9 h-9 bg-brand-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-md shadow-brand-200">
                            F
                        </div>
                        <h1 class="text-xl font-bold tracking-tight text-slate-900">FieldBrain</h1>
                    </div>
                    <span class="px-2 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold uppercase tracking-wider rounded-md">Live</span>
                </div>
                <p class="text-sm text-slate-500 app-anim opacity-0 pl-1">Climate intelligence for your farm.</p>
            </header>

            <!-- VIEW 1: Input Form -->
            <section id="input-view" class="px-8 pb-8 relative h-full bg-white z-20">
                <div class="space-y-6 mt-6">
                    
                    <!-- Location Input -->
                    <div class="input-group app-anim opacity-0">
                        <label class="block text-xs font-bold uppercase tracking-wide text-slate-400 mb-2 ml-1">Location (Village)</label>
                        <div class="relative group">
                            <input type="text" id="location" value="Kochi, Kerala" 
                                class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-slate-900 font-medium focus:outline-none focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all placeholder-slate-400 group-hover:bg-white group-hover:shadow-sm"
                                placeholder="Enter village name">
                            <div class="absolute right-4 top-4 text-brand-600 bg-brand-50 rounded-full p-0.5">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                            </div>
                        </div>
                    </div>

                    <!-- Crop Type -->
                    <div class="input-group app-anim opacity-0">
                        <label class="block text-xs font-bold uppercase tracking-wide text-slate-400 mb-2 ml-1">Crop Type</label>
                        <div class="relative group">
                            <select id="crop" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-slate-900 font-medium focus:outline-none focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all appearance-none cursor-pointer group-hover:bg-white group-hover:shadow-sm">
                                <option value="paddy">Paddy (Rice)</option>
                                <option value="maize">Maize</option>
                                <option value="wheat">Wheat</option>
                                <option value="vegetables">Vegetables</option>
                            </select>
                            <svg class="w-5 h-5 text-slate-400 absolute right-4 top-4 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                    </div>

                    <!-- Crop Stage -->
                    <div class="input-group app-anim opacity-0">
                        <label class="block text-xs font-bold uppercase tracking-wide text-slate-400 mb-2 ml-1">Crop Stage</label>
                        <div class="relative group">
                            <select id="stage" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-slate-900 font-medium focus:outline-none focus:ring-2 focus:ring-brand-500/20 focus:border-brand-500 transition-all appearance-none cursor-pointer group-hover:bg-white group-hover:shadow-sm">
                                <option value="sowing">Sowing / Planting</option>
                                <option value="growing">Growing / Vegetative</option>
                                <option value="harvest">Harvesting</option>
                            </select>
                            <svg class="w-5 h-5 text-slate-400 absolute right-4 top-4 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                    </div>

                    <!-- CTA Button -->
                    <button id="analyze-btn" class="input-anim app-anim opacity-0 w-full bg-slate-900 hover:bg-black text-white font-semibold py-4 rounded-2xl shadow-lg shadow-slate-300 transition-all transform active:scale-[0.98] flex items-center justify-center gap-2 mt-8">
                        <span>Analyze Risk</span>
                        <svg class="w-4 h-4 text-brand-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                    </button>

                    <!-- Demo Note -->
                    <div class="input-anim app-anim opacity-0 mt-6 p-4 bg-blue-50/50 rounded-xl border border-blue-100 text-xs text-blue-800 leading-relaxed">
                        <strong class="block mb-1 text-blue-900">Live Data Enabled:</strong>
                        Enter any city or village name. The app will fetch real-time rainfall and temperature data to calculate risk.
                    </div>
                </div>
            </section>

            <!-- LOADER VIEW (Hidden by default) -->
            <section id="loader-view" class="absolute inset-0 bg-white flex flex-col items-center justify-center z-10 opacity-0 pointer-events-none">
                <div class="loader-spinner mb-6"></div>
                <h3 class="text-lg font-semibold text-slate-900 mb-1">Analyzing Weather</h3>
                <p class="text-sm text-slate-500" id="loader-text">Connecting to satellites...</p>
            </section>

            <!-- VIEW 2: Results Dashboard (Hidden by default) -->
            <section id="results-view" class="absolute inset-0 bg-white px-8 py-8 z-20 opacity-0 pointer-events-none overflow-y-auto no-scrollbar">
                
                <!-- Result Header -->
                <div class="flex justify-between items-start mb-6 result-anim opacity-0">
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Analysis Report</h2>
                        <div class="flex items-center gap-2 mt-1">
                             <p class="text-sm text-slate-500 font-medium" id="result-location">For Kochi, Kerala</p>
                             <span id="data-source-badge" class="hidden px-1.5 py-0.5 rounded bg-brand-50 text-brand-700 text-[9px] font-bold uppercase tracking-wide border border-brand-100">Live Data</span>
                        </div>
                    </div>
                    <button id="reset-btn" class="group flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 transition-colors">
                        <svg class="w-4 h-4 text-slate-500 group-hover:text-slate-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>

                <!-- Risk Card -->
                <div id="risk-card" class="result-anim opacity-0 p-6 rounded-3xl mb-6 border transition-colors duration-300 shadow-sm relative overflow-hidden">
                    <!-- Background Pattern -->
                    <div class="absolute right-0 top-0 w-32 h-32 bg-current opacity-[0.03] rounded-bl-full pointer-events-none"></div>

                    <div class="flex items-center gap-3 mb-3 relative z-10">
                        <span id="risk-badge" class="px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider bg-white/50 backdrop-blur-sm">
                            High Risk
                        </span>
                        <span class="text-xs opacity-70 font-semibold">Window: <span id="time-window">48 Hrs</span></span>
                    </div>
                    <h3 id="advice-headline" class="text-xl font-bold mb-2 leading-tight relative z-10">
                        Flood risk detected.
                    </h3>
                    <p id="advice-body" class="text-sm opacity-90 leading-relaxed relative z-10">
                        Heavy rainfall expected (>80mm). Harvest early to avoid crop submergence.
                    </p>
                </div>

                <!-- Weather Details -->
                <div class="grid grid-cols-2 gap-4 mb-8 result-anim opacity-0">
                    <div class="p-5 bg-slate-50 rounded-2xl border border-slate-100">
                        <div class="flex items-center gap-2 mb-2">
                            <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                            <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wide">Rainfall (1h)</p>
                        </div>
                        <p class="text-xl font-bold text-slate-900" id="stat-rain">92mm</p>
                    </div>
                    <div class="p-5 bg-slate-50 rounded-2xl border border-slate-100">
                        <div class="flex items-center gap-2 mb-2">
                            <svg class="w-4 h-4 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                            <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wide">Temp</p>
                        </div>
                        <p class="text-xl font-bold text-slate-900" id="stat-temp">28째C</p>
                    </div>
                </div>

                <!-- Action Checklist -->
                <div class="result-anim opacity-0">
                    <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-4 ml-1">Recommended Actions</h4>
                    <ul class="space-y-3" id="action-list">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <script>
        // --- 1. CONFIG & UTILS ---
        gsap.registerPlugin(ScrollTrigger);
        const API_KEY = "4d995f203769e7af19b22a23b4aa2907";

        // Fetch Live Weather
        async function getLiveWeather(location) {
            try {
                // Using units=metric for Celsius
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${location}&appid=${API_KEY}&units=metric`);
                
                if (!response.ok) {
                    throw new Error('City not found');
                }
                
                const data = await response.json();
                
                return {
                    success: true,
                    temp: data.main.temp,
                    // OpenWeather returns rain object often only if raining. Get 1h volume or 0.
                    rain: data.rain ? (data.rain['1h'] || 0) : 0,
                    condition: data.weather[0].main
                };
            } catch (error) {
                console.warn("Weather fetch failed:", error);
                return { success: false };
            }
        }


        // --- 2. RISK ENGINE (Dynamic) ---
        const riskEngine = {
            analyze: (location, crop, stage, weather) => {
                
                let riskLevel = 'Low';
                let theme = 'emerald';
                let headline = 'Conditions are stable.';
                let message = 'Weather is favorable. Proceed with standard crop care.';
                let actions = ['Monitor soil moisture', 'Routine pest surveillance', 'Plan fertilizer'];
                let window = 'Next 24 Hours';

                // Use real data if available, else mock data
                const temp = weather.success ? weather.temp : 28; // fallback mock
                const rain = weather.success ? weather.rain : 0;  // fallback mock
                
                // --- LOGIC RULES ---
                
                // Rule 1: High Rain + Harvest = Flood Risk
                if (rain > 2.5 && stage === 'harvest') {
                    riskLevel = 'High';
                    theme = 'red';
                    headline = 'Rainfall Risk Alert.';
                    message = `Significant rainfall (${rain}mm) detected during harvest. Crop damage likely.`;
                    actions = ['Pause harvesting immediately', 'Cover harvested grain', 'Dig emergency drainage'];
                }
                
                // Rule 2: High Temp + Growing = Heat Stress
                else if (temp > 35 && stage === 'growing') {
                    riskLevel = 'Medium';
                    theme = 'orange';
                    headline = 'Heat stress likely.';
                    message = `Temperatures at ${temp}째C. Soil moisture depletion expected rapidly.`;
                    actions = ['Irrigate in early morning', 'Apply mulch to soil', 'Delay fertilizer application'];
                }

                // Rule 3: Rain + Sowing = Good or Bad? (Let's say Bad if heavy)
                else if (rain > 5 && stage === 'sowing') {
                    riskLevel = 'Medium';
                    theme = 'orange';
                    headline = 'Washout risk.';
                    message = `Heavy rain (${rain}mm) may wash away seeds.`;
                    actions = ['Delay sowing by 24 hours', 'Ensure field drainage', 'Monitor forecast'];
                }
                
                // Rule 4: Wheat + Sowing + High Temp = Poor Germination
                else if (crop === 'wheat' && stage === 'sowing' && temp > 30) {
                     riskLevel = 'Medium';
                     theme = 'orange';
                     headline = 'Poor germination risk.';
                     message = `Temperature (${temp}째C) is too high for wheat sowing.`;
                     actions = ['Delay sowing until temp drops', 'Pre-irrigate field', 'Use heat-tolerant variety'];
                }

                // Rule 5: Just raining?
                else if (rain > 0) {
                     headline = 'Rainfall detected.';
                     message = `Light to moderate rain (${rain}mm). Generally beneficial unless harvesting.`;
                     actions = ['Pause spraying chemicals', 'Collect rainwater', 'Monitor drainage'];
                }

                return {
                    riskLevel,
                    theme,
                    window,
                    headline,
                    message,
                    stats: { 
                        rain: rain.toFixed(1) + 'mm', 
                        temp: Math.round(temp) + '째C' 
                    },
                    actions,
                    isLive: weather.success
                };
            }
        };


        // --- 3. UI ANIMATIONS ---
        window.addEventListener('load', () => {
            // Hero
            gsap.to(".hero-anim", { y: 0, opacity: 1, duration: 1, stagger: 0.1, ease: "power3.out" });
            
            // Scroll Triggers
            const animateOnScroll = (selector, trigger) => {
                gsap.utils.toArray(selector).forEach((el, i) => {
                    gsap.to(el, {
                        scrollTrigger: { trigger: trigger || el, start: "top 85%" },
                        y: 0, opacity: 1, duration: 0.6, delay: i * 0.1, ease: "power2.out"
                    });
                });
            };

            animateOnScroll('.stat-item');
            animateOnScroll('.section-header');
            animateOnScroll('.step-card', '#how-it-works');
            animateOnScroll('.feature-card', '#features');
            animateOnScroll('.story-card', '#stories');
            
            gsap.to(".section-cta", {
                scrollTrigger: { trigger: ".section-cta", start: "top 80%" },
                scale: 1, opacity: 1, duration: 0.8, ease: "power2.out"
            });
        });


        // --- 4. APP INTERACTION LOGIC ---
        const launchTriggers = document.querySelectorAll('.launch-trigger');
        const closeAppBtn = document.getElementById('close-app-btn');
        const appBackdrop = document.getElementById('app-backdrop');
        const appContainer = document.getElementById('app-container');
        const appCard = document.getElementById('app-card');
        const landingPage = document.getElementById('landing-page');
        const analyzeBtn = document.getElementById('analyze-btn');
        const resetBtn = document.getElementById('reset-btn');
        const loaderText = document.getElementById('loader-text');

        // Open/Close App
        function openApp() {
            appContainer.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            const tl = gsap.timeline();
            tl.to(landingPage, { filter: "blur(8px) grayscale(20%)", scale: 0.98, duration: 0.5, ease: "power2.out" })
              .to(appContainer, { backgroundColor: "rgba(15, 23, 42, 0.6)", duration: 0.3 }, "-=0.5")
              .to(appCard, { opacity: 1, scale: 1, duration: 0.5, ease: "back.out(1.1)" }, "-=0.3")
              .to(".app-anim", { y: 0, opacity: 1, stagger: 0.1, duration: 0.5, ease: "power2.out" }, "-=0.2");
        }

        function closeApp() {
            document.body.style.overflow = '';
            const tl = gsap.timeline({
                onComplete: () => {
                    appContainer.classList.add('hidden');
                    gsap.set(".app-anim", { y: 10, opacity: 0 }); 
                    gsap.set(appCard, { scale: 0.95, opacity: 0 });
                }
            });
            tl.to(appCard, { opacity: 0, scale: 0.95, duration: 0.3, ease: "power2.in" })
              .to(appContainer, { backgroundColor: "rgba(15, 23, 42, 0)", duration: 0.3 }, "-=0.2")
              .to(landingPage, { filter: "blur(0px) grayscale(0%)", scale: 1, duration: 0.4, ease: "power2.out" }, "-=0.3");
        }

        launchTriggers.forEach(btn => btn.addEventListener('click', openApp));
        closeAppBtn.addEventListener('click', closeApp);
        appBackdrop.addEventListener('click', closeApp);


        // Analyze Button Click
        analyzeBtn.addEventListener('click', async () => {
            const loc = document.getElementById('location').value;
            const crop = document.getElementById('crop').value;
            const stage = document.getElementById('stage').value;

            // 1. UI Transition: Input -> Loader
            const tl = gsap.timeline();
            tl.to("#input-view", { opacity: 0, y: -10, duration: 0.3, pointerEvents: 'none' })
              .to("#loader-view", { opacity: 1, duration: 0.3, pointerEvents: 'auto' });
            
            loaderText.innerText = "Connecting to satellites...";

            // 2. Fetch Data (Real API)
            const weather = await getLiveWeather(loc);
            
            // 3. Update Loader Text based on result
            if (weather.success) {
                loaderText.innerText = "Processing live weather data...";
            } else {
                loaderText.innerText = "Offline mode. Using simulation...";
            }

            // 4. Run Risk Logic
            const result = riskEngine.analyze(loc, crop, stage, weather);

            // 5. Short artificial delay for UX (so loader doesn't flash too fast)
            setTimeout(() => {
                populateResults(loc, result);
                
                // UI Transition: Loader -> Results
                const tl2 = gsap.timeline();
                tl2.to("#loader-view", { opacity: 0, duration: 0.3, pointerEvents: 'none' })
                   .to("#results-view", { opacity: 1, duration: 0.1, pointerEvents: 'auto' })
                   .to(".result-anim", { y: 0, opacity: 1, stagger: 0.08, duration: 0.6, ease: "back.out(1.1)" });
            }, 1200);
        });

        // Reset Button
        resetBtn.addEventListener('click', () => {
            const tl = gsap.timeline();
            tl.to("#results-view", { opacity: 0, y: 10, duration: 0.3, pointerEvents: 'none' })
              .to("#results-view .result-anim", { opacity: 0, y: 10, duration: 0 }) 
              .to("#input-view", { opacity: 1, y: 0, duration: 0.4, pointerEvents: 'auto', ease: "power2.out" });
        });

        // Populate HTML
        function populateResults(location, data) {
            document.getElementById('result-location').innerText = `For ${location}`;
            
            // Show/Hide Live Badge
            const badge = document.getElementById('data-source-badge');
            if(data.isLive) {
                badge.classList.remove('hidden');
                badge.innerText = "Live Data";
            } else {
                badge.classList.remove('hidden');
                badge.innerText = "Simulated";
            }

            document.getElementById('risk-badge').innerText = data.riskLevel + ' Risk';
            document.getElementById('time-window').innerText = data.window;
            document.getElementById('advice-headline').innerText = data.headline;
            document.getElementById('advice-body').innerText = data.message;
            document.getElementById('stat-rain').innerText = data.stats.rain;
            document.getElementById('stat-temp').innerText = data.stats.temp;

            const card = document.getElementById('risk-card');
            const riskBadge = document.getElementById('risk-badge');
            
            card.className = `result-anim opacity-0 p-6 rounded-3xl mb-6 border transition-colors duration-300 shadow-sm relative overflow-hidden`;
            
            if (data.theme === 'red') {
                card.classList.add('bg-rose-50', 'border-rose-100', 'text-rose-900');
                riskBadge.className = "px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider bg-white/60 text-rose-700 shadow-sm";
            } else if (data.theme === 'orange') {
                card.classList.add('bg-amber-50', 'border-amber-100', 'text-amber-900');
                riskBadge.className = "px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider bg-white/60 text-amber-700 shadow-sm";
            } else {
                card.classList.add('bg-emerald-50', 'border-emerald-100', 'text-emerald-900');
                riskBadge.className = "px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider bg-white/60 text-emerald-700 shadow-sm";
            }

            const list = document.getElementById('action-list');
            list.innerHTML = '';
            data.actions.forEach((action) => {
                const li = document.createElement('li');
                li.className = "flex items-start gap-3 p-4 bg-white border border-slate-100 rounded-2xl shadow-sm";
                const checkColor = data.theme === 'red' ? 'text-rose-500' : (data.theme === 'orange' ? 'text-amber-500' : 'text-emerald-500');
                li.innerHTML = `<div class="mt-0.5 min-w-[20px] h-5 rounded-full bg-slate-50 flex items-center justify-center"><svg class="w-3.5 h-3.5 ${checkColor}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div><span class="text-sm text-slate-700 font-medium leading-tight">${action}</span>`;
                list.appendChild(li);
            });
        }
    </script>
</body>
</html>